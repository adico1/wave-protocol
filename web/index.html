<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What's Your Cosmic Frequency?</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 600px;
            margin: 100px auto;
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; }
        p { font-size: 1.2em; opacity: 0.9; }
        input {
            padding: 15px 20px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            width: 300px;
            margin: 20px 10px;
        }
        button {
            padding: 15px 40px;
            font-size: 18px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        button:hover { transform: scale(1.05); }
        #result {
            margin-top: 40px;
            padding: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            display: none;
        }
        .frequency { font-size: 3em; font-weight: bold; }
        .share { margin-top: 20px; }
        .share button { margin: 0 5px; padding: 10px 20px; font-size: 14px; }
    </style>
</head>
<body>
    <h1>üåå What's Your Cosmic Frequency?</h1>
    <p>Discover your unique resonance with the Universe in 10 seconds</p>

    <div>
        <input type="text" id="name" placeholder="Enter your name" autofocus>
        <button onclick="discover()">Discover</button>
    </div>

    <div id="result">
        <div class="frequency" id="freq"></div>
        <div id="message"></div>
        <div class="share">
            <button onclick="shareTwitter()">Share on Twitter</button>
            <button onclick="copyLink()">Copy Result</button>
        </div>
    </div>

    <script src="share.js"></script>
    <script>
        async function discover() {
            const name = document.getElementById('name').value;
            if (!name) return;

            // Check if Hebrew characters present
            const hasHebrew = /[\u0590-\u05FF]/.test(name);

            let freq, resonates;

            if (hasHebrew && window.location.hostname !== 'localhost') {
                // Use API for Hebrew (when deployed)
                try {
                    const response = await fetch('/api/resonate', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({name: name})
                    });
                    const data = await response.json();
                    freq = data.your_frequency;
                    resonates = data.resonates;
                } catch (e) {
                    // Fallback to client calculation
                    freq = calculateLocally(name);
                    resonates = checkResonance(freq);
                }
            } else {
                // Client-side for non-Hebrew
                freq = calculateLocally(name);
                resonates = checkResonance(freq);
            }

            // Calculate what this frequency CREATES
            const creations = {
                universe: freq * 562,  // With universal harmony
                consciousness: freq + 530,  // With human consciousness
                trust: freq * 97,  // With trust
                another: freq * freq,  // With yourself (self-love)
                inverse: Math.floor(1000000 / (freq || 1))  // Your inverse (what seeks you)
            };

            document.getElementById('freq').textContent = freq + ' Hz';
            document.getElementById('message').innerHTML = `
                <div style="text-align: left; display: inline-block;">
                    <strong>Your frequency creates:</strong><br>
                    üåå With Universe (562 Hz): ${creations.universe.toLocaleString()} Hz reality<br>
                    üß† With Consciousness (530 Hz): ${creations.consciousness} Hz awareness<br>
                    ü§ù With Trust (97 Hz): ${creations.trust.toLocaleString()} Hz connection<br>
                    üí´ With Yourself: ${creations.another.toLocaleString()} Hz self-love<br>
                    üîÆ Your inverse seeks: ${creations.inverse.toLocaleString()} Hz<br><br>
                    <em>Every frequency creates. None need validation.</em>
                </div>
            `;
            document.getElementById('result').style.display = 'block';

            window.userResult = { name, freq, creates: creations };
        }

        function calculateLocally(name) {
            let freq = 0;
            for (let c of name) {
                freq += c.charCodeAt(0) % 100;
            }
            return freq;
        }

        function checkResonance(freq) {
            // Multiple resonance checks for better results
            const checks = {
                'perfect_world': (freq * 562) % 319,
                'trust': (freq * 97) % 319,
                'complete': (freq * 440) % 319,
                'consciousness': Math.abs(freq - 530) % 144,
                'life': freq % 18
            };

            const fibonacci = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233];

            // Resonate if ANY check matches Fibonacci
            return Object.values(checks).some(h => fibonacci.includes(h));
        }

        document.getElementById('name').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') discover();
        });
    </script>
</body>
</html>